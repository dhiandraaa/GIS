<!DOCTYPE html>
<html>
<style>
	#map {
    height: 300px;
    width: 90%;
}
</style>
  <head>
  <title>Sitepu</title>
  <link href="index.css" rel="stylesheet" type="text/css">
  </head>
<body><center><div id="wrap">
  	<div id=header>
		<h2>SITEPU</h2>
	</div>
    	<div id="map">
		</div><br>
		<div id=info>
    		<input type="text" name="lng" placeholder="Longitude"> &nbsp;
    		<input type="text" name="lat" placeholder="Latitude"><br><br>
			<textarea name="tempat"></textarea><br><br>
			<button type="submit">SAVE</button>
    	</div>
    </div>
	</center>
</body>
		
		<script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>
		<script>
  // Initialize Firebase
	var config = {
		apiKey: "AIzaSyDEQFNTDHoltRvu-wrdhGQxzpgUFzMo1bM",
		authDomain: "tugas-sig-1521500286405.firebaseapp.com",
		databaseURL: "https://tugas-sig-1521500286405.firebaseio.com",
		projectId: "tugas-sig-1521500286405",
		storageBucket: "",
		messagingSenderId: "358420723994"
	};
	firebase.initializeApp(config);
</script>
    <script>
        function initMap(){
			
		var map = new google.maps.Map(document.getElementById('map'), {
			zoom: 11,
			center: {lat: -5.400549,lng: 105.266272}});
		  var infoWin = new google.maps.InfoWindow();
            console.log(map);
        
            var markers = locations.map(function(location, i) {
                var marker = new google.maps.Marker({
                    position: location,
		icon : 'images/pin.png',
		animation: google.maps.Animation.DROP
					});
					google.maps.event.addListener(marker, 'click', function(evt) {
						infoWin.setContent(location.info);
						infoWin.open(map, marker);
					})

                       map.addListener('click',function(evt){
		               marker.setPosition(event.latLng);
		               document.getElementById('lat').value = marker.position.toString();
                       });
				return marker;
                }); 
            console.log(locations);
            console.log(markers);
            var markerCluster = new MarkerClusterer(map, markers,
                {imagePath: 'images/m'});
        
            var d = markerCluster.distanceBetweenPoints_(markers[2].getPosition(),markers[4].getPosition());
            console.log(markerCluster.getCalculator());
		}

        var locations = [
			{lat: -5.397317, lng: 105.262002, info: "Makam Pahlawan"},
			{lat: -5.363868, lng: 105.248657, info: "Kampung Baru"},
			{lat: -5.372858, lng: 105.239979, info: "KB. Anak Agung Siwo Mego"},
			{lat: -5.378445, lng: 105.240977, info: "Muslim Kamboja"},
			{lat: -5.377909, lng: 105.244274, info: "Jl. Sultan Jamil"},
			{lat: -5.427119, lng: 105.268171, info: "KB Payakun"},
			{lat: -5.413963, lng: 105.261228, info: "Unknown"},
			{lat: -5.415326, lng: 105.272232, info: "Unknown"},
			]
    </script>	
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbqwfq4FJ6xxI_Oho85sA-2jlWUZLI5gM&callback=initMap"
	type="text/javascript"></script>
	<script src="src/markerclusterer.js">
    </script>
	
</html>
